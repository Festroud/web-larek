# Проектная работа "Веб-ларек"
Это учебный проект, созданный в рамках курса Яндекс Практикум. Он предлагает пользователям возможность взаимодействовать с системой для заказа товаров, предназначенных для веб-разработчиков.

## Стек технологий

- **HTML**
- **SCSS**
- **TypeScript**
- **Webpack**

## Структура проекта

- `src/` — исходные файлы проекта
- `src/components/` — папка с JS компонентами
- `src/components/base/` — папка с базовым кодом
- `src/pages/index.html` — HTML-файл главной страницы
- `src/types/index.ts` — файл с типами
- `src/index.ts` — точка входа приложения
- `src/scss/styles.scss` — корневой файл стилей
- `src/utils/constants.ts` — файл с константами
- `src/utils/utils.ts` — файл с утилитами

## Инструкция по сборке и запуску

1. Установить зависимости:
   ```bash
   npm install
   ```
2. Запустить проект в режиме разработки:
   ```bash
   npm run start
   ```
3. Для сборки проекта в продакшен:
   ```bash
   npm run build
   ```

---

## Архитектура проекта Web-Larek

### Базовый код
**Класс Api**
- **Назначение:** Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и объект с заголовками запросов.
**Методы**
- `get(uri: string)` — выполняет GET-запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер;
  - `post(uri: string, data: object, method: ApiPostMethods = 'POST')` — По умолчанию выполняется POST-запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове. Принимает объект с данными, которые будут переданы в JSON-формате в теле запроса, и отправляет эти данные на ендпоинт, переданный как параметр при вызове метода. 

**Класс EventEmitter**
- **Назначение:** Обрабатывает события в системе.
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в Presenter для обработки событий и в слоях приложения для генерации событий.
- **Методы:**
  - `on(event: string, callback: Function)` — подписка на событие.
  - `emit(event: string, data?: any)` — генерация события.
  - `trigger(event: string, context?: object)` — возвращает функцию для генерации события.
---
### **Model (Модели данных)**
## MVP Архитектура

1. **Model** — логика и данные (`Basket`, `Card`, `Order`).
2. **View** — UI-компоненты (`Gallery`, `Header`, `Modal`).
3. **Presenter** — связь между Model и View (`BasketPresenter`, `OrderPresenter`).

**Модели данных** отвечают за хранение данных и выполнение бизнес-логики, не взаимодействуя напрямую с UI.

- **`IBaseCard`** — базовый интерфейс товара: `id`, `title`, `price`.
- **`ICard`** — карточка товара с дополнительными полями: `category`, `description`, `image`.
- **`IBasketItem`** — элемент корзины: `product`, `quantity`.
- **`IBasket`** — корзина: `items`, `totalPrice`, методы `addItem()`, `removeItem()`.
- **`IOrder`** — заказ: `items`, `paymentMethod`, `deliveryAddress`, `email`, `phone`, метод `placeOrder()`.

### **View (UI-компоненты)**

UI-компоненты отображают данные и не содержат бизнес-логики.

- **`IGallery`** — галерея товаров: `products`, методы `render()`, `onProductClick()`.
- **`IHeader`** — шапка сайта: `logo`, `basketButton`, `basketCounter`, метод `updateBasketCounter()`.
- **`IModal`** — модальное окно: методы `open()`, `close()`.
- **`IOrderStatusModal`** — окно статуса заказа: методы `renderSuccess()`, `renderFailure()`.

### **Presenter**

**Презентеры** управляют бизнес-логикой и взаимодействием между Model и View.

- **`BasketPresenter`** — управляет корзиной, реагирует на клики в `Gallery`, обновляет `Basket` и `Header`.
- **`OrderPresenter`** — управляет оформлением заказа, обновляет `OrderStatusModal`.

### **События**

- **`IEventBus`** — брокер событий: методы `on()`, `emit()`.

---

## UML-схема структуры классов

Вот UML-схема, отражающая архитектуру проекта:

![UML-схема](./UML.png)

## Взаимодействие компонентов

1. **Gallery** генерирует событие при клике на товар → **BasketPresenter** добавляет товар в **Basket**.
2. **BasketPresenter** обновляет счётчик в **Header** через `updateBasketCounter()`.
3. При оформлении заказа **OrderPresenter** обрабатывает данные и отображает статус в **OrderStatusModal**.